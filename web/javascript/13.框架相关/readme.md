[TOC]
***

### 一、为什么要在列表组件中写key

vue和react都是采用diff算法来对比新旧虚拟节点，从而更新节点。在vue的diff函数中，在交叉对比中，当新节点和旧节点头尾交叉对比没有结果时，会根据新节点的key去对比旧节点数组中的key，从而找到相应旧节点（这里对应的是一个key=>index的map映射）。如果没找到就认为是一个新增节点。而如果没有key，那么就会采用遍历查找的方式去找到对应的旧节点。一种一个map映射，另一种是遍历查找。相比而言，map映射的速度更快。

### 二、为什么虚拟dom会提高性能

虚拟dom相当于js和真实dom中间加了一个缓存，利用dom diff算法避免了没有必要的dom操作，从而提高性能。

具体实现步骤如下：
1.用js对象结构表示DOM树的结构；然后用这个树构建一个真正的dom树，插到文档当中。
2.当状态变更的时候，重新构造一棵新的对象树。然后用新的树和旧的树进行比较，记录两棵树差异，把2所记录的差异应用到步骤1所构建的真正的dom树上，视图就更新了。
